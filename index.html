<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Luan Financeiro</title>

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#0b1220;
  color:#fff;
}
.container{
  max-width:420px;
  margin:auto;
  padding:20px;
}
.header{
  text-align:center;
  margin-bottom:20px;
}
.header h1{
  margin:0;
}
.header p{
  font-size:14px;
  opacity:.8;
}
.card{
  background:#111a2e;
  border-radius:16px;
  padding:18px;
  margin-bottom:16px;
}
input,button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:12px;
  margin-top:8px;
}
button{
  font-weight:bold;
  cursor:pointer;
}
.btn{
  background:#22c55e;
}
.btn-premium{
  background:#facc15;
  color:#000;
}
.progress{
  background:#1f2937;
  height:10px;
  border-radius:10px;
  overflow:hidden;
  margin-top:10px;
}
.progress div{
  height:100%;
  background:#22c55e;
  width:0%;
}
.small{
  font-size:12px;
  opacity:.8;
}
.lock{
  opacity:.5;
}
ul{
  padding-left:18px;
}
.badge{
  background:#facc15;
  color:#000;
  padding:4px 10px;
  border-radius:20px;
  font-size:12px;
  font-weight:bold;
  display:inline-block;
}
</style>
</head>

<body>
<div class="container">

<div class="header">
  <h1>ğŸ’° Luan Financeiro</h1>
  <p>Controle seu dinheiro de forma simples e inteligente</p>
</div>

<div class="card">
  <p class="small">Saldo economizado</p>
  <h2>R$ <span id="total">0.00</span></h2>
</div>

<div class="card">
  <p class="small">Meta mensal</p>
  <input id="metaInput" type="number" placeholder="Ex: 1500">
  <button class="btn" onclick="salvarMeta()">Salvar minha meta</button>
  <div class="progress"><div id="progress"></div></div>
  <p id="simulador" class="small"></p>
</div>

<div class="card">
  <p class="small">Guardar dinheiro hoje</p>
  <input id="valorDia" type="number" placeholder="Valor do dia">
  <button class="btn" onclick="guardar()">Guardar dinheiro</button>
</div>

<div class="card" id="premiumBox">
  <span class="badge">ğŸ’ PREMIUM</span>
  <p class="small">FunÃ§Ãµes avanÃ§adas</p>
  <button class="btn-premium" onclick="lembrete()">ğŸ”” Lembrete diÃ¡rio</button>
  <button class="btn-premium" onclick="exportar()">ğŸ“¤ Exportar histÃ³rico</button>
  <button class="btn-premium" onclick="resetar()">â™»ï¸ Reset mensal</button>
</div>

<div class="card" id="ativarPremiumBox">
  <p class="small">Ativar Premium</p>
  <input id="codigoPremium" placeholder="CÃ³digo Premium">
  <button class="btn-premium" onclick="ativarPremium()">Ativar Premium</button>
</div>

<div class="card">
  <button class="btn-premium" onclick="window.location.href='venda.html'">
    ğŸ’ Quero ser Premium
  </button>
</div>

<div class="card">
  <h4>ğŸ“œ HistÃ³rico</h4>
  <ul id="historico"></ul>
</div>

</div>

<script>
/* ===== PREMIUM ===== */
function isPremium(){
  return localStorage.getItem("premium")==="true";
}
function ativarPremiumLocal(){
  localStorage.setItem("premium","true");
}

/* AtivaÃ§Ã£o automÃ¡tica */
(function(){
  const p=new URLSearchParams(window.location.search);
  if(p.get("premium")==="true"){
    ativarPremiumLocal();
    alert("ğŸ’ Premium ativado com sucesso!");
    history.replaceState({},document.title,"index.html");
  }
})();

/* AtivaÃ§Ã£o manual */
function ativarPremium(){
  if(codigoPremium.value.trim()==="LUAN-PREMIUM"){
    ativarPremiumLocal();
    alert("ğŸ’ Premium ativado!");
    location.reload();
  }else{
    alert("âŒ CÃ³digo invÃ¡lido");
  }
}

/* ===== DADOS ===== */
let dados=JSON.parse(localStorage.getItem("financeiro"))||{
  total:0,
  meta:0,
  historico:[]
};

function salvarMeta(){
  dados.meta=Number(metaInput.value);
  salvar();
}
function guardar(){
  let v=Number(valorDia.value);
  if(!v)return;
  dados.total+=v;
  dados.historico.push({
    data:new Date().toLocaleDateString(),
    valor:v.toFixed(2)
  });
  valorDia.value="";
  salvar();
}

/* ===== FUNÃ‡Ã•ES PREMIUM ===== */
function lembrete(){
  if(!isPremium()){
    alert("ğŸ”’ Exclusivo do Premium");
    window.location.href="venda.html";
    return;
  }
  alert("ğŸ”” Lembrete diÃ¡rio ativado!");
}
function exportar(){
  if(!isPremium()){
    alert("ğŸ”’ Exclusivo do Premium");
    window.location.href="venda.html";
    return;
  }
  let texto="HistÃ³rico Financeiro:\n";
  dados.historico.forEach(h=>{
    texto+=`${h.data} - R$ ${h.valor}\n`;
  });
  alert(texto);
}
function resetar(){
  if(!isPremium()){
    alert("ğŸ”’ Exclusivo do Premium");
    window.location.href="venda.html";
    return;
  }
  if(confirm("Resetar mÃªs atual?")){
    dados.total=0;
    dados.historico=[];
    salvar();
  }
}

/* ===== UI ===== */
function salvar(){
  localStorage.setItem("financeiro",JSON.stringify(dados));
  atualizar();
}
function atualizar(){
  total.innerText=dados.total.toFixed(2);
  let p=dados.meta?(dados.total/dados.meta)*100:0;
  progress.style.width=Math.min(p,100)+"%";
  historico.innerHTML="";
  dados.historico.forEach(h=>{
    historico.innerHTML+=`<li>${h.data} â€” R$ ${h.valor}</li>`;
  });
  simulador.innerText=dados.meta
    ?`Para bater a meta: R$ ${(dados.meta/30).toFixed(2)} por dia`
    :"";
  if(isPremium()){
    ativarPremiumBox.style.display="none";
  }else{
    premiumBox.classList.add("lock");
  }
}
atualizar();
</script>
</body>
</html>
