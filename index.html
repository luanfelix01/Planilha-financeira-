<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Luan Financeiro</title>

<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#0b1220;
  color:#fff;
}
.container{
  max-width:420px;
  margin:auto;
  padding:20px;
}
.card{
  background:#111a2e;
  border-radius:14px;
  padding:16px;
  margin-bottom:16px;
}
h1,h2{margin:0}
input,button{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:none;
  margin-top:8px;
}
button{
  font-weight:bold;
  cursor:pointer;
}
.btn{
  background:#22c55e;
}
.btn-premium{
  background:#facc15;
  color:#000;
}
.small{
  font-size:12px;
  opacity:.8;
}
.progress{
  background:#1f2937;
  height:10px;
  border-radius:10px;
  overflow:hidden;
  margin-top:10px;
}
.progress div{
  height:100%;
  background:#22c55e;
  width:0%;
}
ul{
  padding-left:18px;
}
.lock{
  opacity:.5;
}
</style>
</head>

<body>
<div class="container">

<h2>üí∞ Luan Financeiro</h2>

<div class="card">
  <p class="small">Saldo economizado</p>
  <h1>R$ <span id="total">0.00</span></h1>
</div>

<div class="card">
  <p class="small">Meta mensal</p>
  <input id="metaInput" type="number" placeholder="Ex: 1500">
  <button class="btn" onclick="salvarMeta()">Salvar meta</button>

  <div class="progress">
    <div id="progress"></div>
  </div>
  <p id="simulador" class="small"></p>
</div>

<div class="card">
  <p class="small">Guardar dinheiro hoje</p>
  <input id="valorDia" type="number" placeholder="Valor">
  <button class="btn" onclick="guardar()">Guardar</button>
</div>

<div class="card" id="premiumCard">
  <p class="small">üîî Lembrete di√°rio (Premium)</p>
  <button class="btn-premium" onclick="ativarLembrete()">Ativar lembrete</button>
</div>

<div class="card" id="ativarPremiumCard">
  <p class="small">üíé Ativar Premium</p>
  <input id="codigoPremium" placeholder="C√≥digo Premium">
  <button class="btn-premium" onclick="ativarPremium()">Ativar Premium</button>
</div>

<div class="card">
  <button class="btn-premium" onclick="window.location.href='venda.html'">
    üíé Comprar Premium
  </button>
</div>

<div class="card">
  <h4>üìú Hist√≥rico</h4>
  <ul id="historico"></ul>
</div>

</div>

<script>
/* ========= PREMIUM ========= */
function ativarPremiumLocal(){
  localStorage.setItem("premium","true");
}

function isPremium(){
  return localStorage.getItem("premium")==="true";
}

/* Ativa√ß√£o autom√°tica por link */
(function(){
  const params = new URLSearchParams(window.location.search);
  if(params.get("premium")==="true"){
    ativarPremiumLocal();
    alert("üíé Premium ativado com sucesso!");
    history.replaceState({},document.title,"index.html");
  }
})();

/* Ativa√ß√£o manual */
function ativarPremium(){
  const codigo = document.getElementById("codigoPremium").value.trim();
  if(codigo==="LUAN-PREMIUM"){
    ativarPremiumLocal();
    alert("üíé Premium ativado com sucesso!");
    location.reload();
  }else{
    alert("‚ùå C√≥digo inv√°lido");
  }
}

/* ========= DADOS ========= */
let dados = JSON.parse(localStorage.getItem("financeiro")) || {
  total:0,
  meta:0,
  historico:[]
};

function salvarMeta(){
  dados.meta = Number(metaInput.value);
  salvar();
}

function guardar(){
  const v = Number(valorDia.value);
  if(!v || v<=0) return;
  dados.total += v;
  dados.historico.push({
    data:new Date().toLocaleDateString(),
    valor:v.toFixed(2)
  });
  valorDia.value="";
  salvar();
}

function ativarLembrete(){
  if(!isPremium()){
    alert("üîí Fun√ß√£o exclusiva do Premium");
    window.location.href="venda.html";
    return;
  }
  alert("üîî Lembrete Premium ativado!");
}

/* ========= UI ========= */
function salvar(){
  localStorage.setItem("financeiro",JSON.stringify(dados));
  atualizar();
}

function atualizar(){
  total.innerText = dados.total.toFixed(2);

  let porcentagem = dados.meta ? (dados.total/dados.meta)*100 : 0;
  progress.style.width = Math.min(porcentagem,100) + "%";

  historico.innerHTML="";
  dados.historico.forEach(h=>{
    historico.innerHTML += `<li>${h.data} ‚Äî R$ ${h.valor}</li>`;
  });

  if(dados.meta){
    simulador.innerText =
      `Para bater a meta: R$ ${(dados.meta/30).toFixed(2)} por dia`;
  }else{
    simulador.innerText="";
  }

  if(isPremium()){
    ativarPremiumCard.style.display="none";
  }else{
    premiumCard.classList.add("lock");
  }
}

atualizar();
</script>
</body>
</html>
