<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Luan Financeiro</title>

<style>
body{margin:0;font-family:Arial;background:#0b1220;color:#fff}
.container{max-width:420px;margin:auto;padding:20px}
.card{background:#111a2e;border-radius:12px;padding:15px;margin-bottom:15px}
button,input{width:100%;padding:12px;border:none;border-radius:10px}
.btn{background:#2dd4bf;font-weight:bold}
.btn-premium{background:#facc15;color:#000;font-weight:bold}
.small{font-size:12px;opacity:.7}
.progress{background:#1f2937;border-radius:10px;height:10px;overflow:hidden}
.progress div{height:100%;background:#22c55e;width:0%}
ul{padding-left:18px}
</style>
</head>

<body>
<div class="container">

<h2>ðŸ’° Luan Financeiro</h2>

<div class="card">
  <p class="small">Saldo economizado</p>
  <h1>R$ <span id="total">0.00</span></h1>
</div>

<div class="card">
  <p class="small">Meta (30 dias)</p>
  <input id="metaInput" type="number" placeholder="Ex: 1500">
  <button class="btn" onclick="salvarMeta()">Salvar meta</button>
  <div class="progress"><div id="progress"></div></div>
  <p id="simulador" class="small"></p>
</div>

<div class="card">
  <p class="small">Guardar dinheiro hoje</p>
  <input id="valorDia" type="number" placeholder="Valor do dia">
  <button class="btn" onclick="guardar()">Guardar hoje</button>
</div>

<div class="card">
  <p class="small">ðŸ”’ Lembrete diÃ¡rio (Premium)</p>
  <button class="btn-premium" onclick="ativarLembrete()">Ativar</button>
</div>

<div class="card">
  <p class="small">ðŸ”‘ Ativar Premium</p>
  <input id="codigoPremium" placeholder="Digite o cÃ³digo Premium">
  <button class="btn-premium" onclick="ativarPremium()">Ativar Premium</button>
</div>

<div class="card">
  <button class="btn-premium" onclick="window.location.href='venda.html'">
    ðŸ’Ž Comprar Premium
  </button>
</div>

<div class="card">
  <h4>ðŸ“œ HistÃ³rico</h4>
  <ul id="historico"></ul>
</div>

</div>

<script>
/* ===== PREMIUM ===== */
function precisaPremium(){
  if(localStorage.getItem("premium")!=="true"){
    alert("ðŸ”’ Recurso exclusivo do Premium");
    window.location.href="venda.html";
    return true;
  }
  return false;
}

/* ===== DADOS ===== */
let dados = JSON.parse(localStorage.getItem("financeiro")) || {
  total:0,meta:0,historico:[]
};

/* ===== FUNÃ‡Ã•ES ===== */
function salvarMeta(){
  dados.meta=Number(metaInput.value);
  atualizar();
}
function guardar(){
  let v=Number(valorDia.value);
  if(!v)return;
  dados.total+=v;
  dados.historico.push({
    data:new Date().toLocaleDateString(),
    valor:v.toFixed(2)
  });
  atualizar();
}
function ativarLembrete(){
  if(precisaPremium())return;
  alert("ðŸ”” Lembrete Premium ativado");
}

/* ===== ATIVAÃ‡ÃƒO PREMIUM MANUAL ===== */
function ativarPremium(){
  if(codigoPremium.value.trim()==="LUAN-PREMIUM"){
    localStorage.setItem("premium","true");
    alert("ðŸ’Ž Premium ativado com sucesso!");
    location.reload();
  } else {
    alert("âŒ CÃ³digo invÃ¡lido");
  }
}

/* ===== ATIVAÃ‡ÃƒO AUTOMÃTICA (KIWIFY) ===== */
const params=new URLSearchParams(window.location.search);
if(params.get("premium")==="true"){
  localStorage.setItem("premium","true");
  alert("ðŸ’Ž Premium liberado automaticamente!");
  history.replaceState({},document.title,"index.html");
}

/* ===== UI ===== */
function atualizar(){
  total.innerText=dados.total.toFixed(2);
  let p=dados.meta?dados.total/dados.meta*100:0;
  progress.style.width=p+"%";
  historico.innerHTML="";
  dados.historico.forEach(h=>{
    historico.innerHTML+=`<li>${h.data} - R$ ${h.valor}</li>`;
  });
  if(dados.meta){
    simulador.innerText=`Para bater a meta: R$ ${(dados.meta/30).toFixed(2)} por dia`;
  }
  localStorage.setItem("financeiro",JSON.stringify(dados));
}
atualizar();
</script>
</body>
</html>
